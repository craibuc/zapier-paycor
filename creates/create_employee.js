const perform = async (z, bundle) => {
  const options = {
    url: 'https://apis.paycor.com/v1/employees',
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      Accept: 'application/json',
      Authorization: 'Bearer {{bundle.authData.access_token}}',
      'Ocp-Apim-Subscription-Key': '{{bundle.authData.subscription_key}}',
    },
    body: {
      LegalEntityId: '{{bundle.inputData.LegalEntityId}}',
      EmployeeNumber: '{{bundle.inputData.EmployeeNumber}}',
      AlternateEmployeeNumber: '{{bundle.inputData.AlternateEmployeeNumber}}',
      Prefix: '{{bundle.inputData.Prefix}}',
      FirstName: '{{bundle.inputData.FirstName}}',
      MiddleName: '{{bundle.inputData.MiddleName}}',
      LastName: '{{bundle.inputData.LastName}}',
      Suffix: '{{bundle.inputData.Suffix}}',
      HomeEmail: '{{bundle.inputData.HomeEmail}}',
      WorkEmail: '{{bundle.inputData.WorkEmail}}',
      Phones: '{{bundle.inputData.Phones}}',
      SocialSecurityNumber: '{{bundle.inputData.SocialSecurityNumber}}',
      BirthDate: '{{bundle.inputData.BirthDate}}',
      Gender: '{{bundle.inputData.Gender}}',
      Ethnicity: '{{bundle.inputData.Ethnicity}}',
      MaritalStatus: '{{bundle.inputData.MaritalStatus}}',
      WorkLocation: '{{bundle.inputData.WorkLocation}}',
      JobTitle: '{{bundle.inputData.JobTitle}}',
      HireDate: '{{bundle.inputData.HireDate}}',
      ReHireDate: '{{bundle.inputData.ReHireDate}}',
      Status: '{{bundle.inputData.Status}}',
      Flsa: '{{bundle.inputData.Flsa}}',
      Type: '{{bundle.inputData.EmploymentType}}',
      ManagerEmpId: '{{bundle.inputData.ManagerEmpId}}',
      PaygroupDescription: '{{bundle.inputData.PaygroupDescription}}',
      DepartmentCode: '{{bundle.inputData.DepartmentCode}}',
      Veteran: '{{bundle.inputData.Veteran}}',
      Disability: '{{bundle.inputData.Disability}}',
      PrimaryAddress: {
        StreetLine1: '{{bundle.inputData.StreetLine1}}',
        StreetLine2: '{{bundle.inputData.StreetLine2}}',
        Suite: '{{bundle.inputData.Suite}}',
        City: '{{bundle.inputData.City}}',
        State: '{{bundle.inputData.State}}',
        Country: '{{bundle.inputData.Country}}',
        County: '{{bundle.inputData.County}}',
        ZipCode: '{{bundle.inputData.ZipCode}}',
      }
    },
  };

  return z.request(options).then((response) => {
    response.throwForStatus();
    const results = response.json;
    return results.ResourceUrl;
  });
};

module.exports = {
  operation: {
    perform: perform,
    inputFields: [
      {
        key: 'LegalEntityId',
        label: 'Legal Entity ID',
        type: 'integer',
        dynamic: 'get_legal_entities.legalEntityId.legalEntityId',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: "Employee's LegalEntityId."
      },
      {
        key: 'EmployeeNumber',
        label: 'Employee #',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Unique number of the employee in the tenant. Generated by Paycor if not provided.'
      },
      {
        key: 'AlternateEmployeeNumber',
        label: 'Alternate Employee #',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Can be up to 10 numbers, Requires Alternate Employee Number product offering.'
      },
      {
        key: 'Prefix',
        label: 'Prefix',
        type: 'string',
        choices: ['None','Dr','DrWithSpace','Fr','Miss','Mr','Mrs','Ms','Prof','Rev','Sr'],
        helpText: 'Name prefix',
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'FirstName',
        label: 'First Name',
        type: 'string',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'First name of the employee.'
      },
      {
        key: 'MiddleName',
        label: 'Middle Name',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Middle name of the employee.'
      },
      {
        key: 'LastName',
        label: 'Last Name',
        type: 'string',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'Last name of the employee.'
      },
      {
        key: 'Suffix',
        label: 'Suffix',
        type: 'string',
        choices: ["None","II","III","IV","V","VI","VII","VIII","IX","X","Jr","Sr"],
        helpText: 'Name Suffix',
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'HomeEmail',
        label: 'Home Email',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Home Email Information of the employee.'
      },
      {
        key: 'WorkEmail',
        label: 'Work Email',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Work Email Information of the employee.'
      },
      {
        key: 'Phones',
        children: [
          {
            key: 'CountryCode',
            label: 'Country Code',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'AreaCode',
            label: 'Area Code',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'PhoneNumber',
            label: 'Phone Number',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'Type',
            label: 'Type',
            type: 'string',
            default: 'Mobile',
            choices: ["Unknown",'Work','Home','Pager','Mobile','Fax','None'],
            required: false,
            list: false,
            altersDynamicFields: false,
          },

        ],
        label: 'Phones',
        required: false,
        altersDynamicFields: false,
      },      
      {
        key: 'SocialSecurityNumber',
        label: 'Social Security #',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Social Security number of the employee.'
      },
      {
        key: 'BirthDate',
        label: 'Birth Date',
        type: 'datetime',
        default: 'today',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Date of birth of the employee following the ISO 8601 standard.'
      },
      {
        key: 'Gender',
        label: 'Gender',
        type: 'string',
        choices: ['Male','Female'],
        helpText: "The employee's gender.",
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'Ethnicity',
        label: 'Ethnicity',
        type: 'string',
        choices: ["AmerIndorAKNative","Asian","BlackorAfricanAmerican","HispanicorLatino","White","NatHIorOthPacIsland","TwoormoreRaces","DeclinedToIdentify"],
        helpText: "The employee's ethnicity.",
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'MaritalStatus',
        label: 'MaritalStatus',
        type: 'string',
        choices: ["Single","Married","Divorced","Separated","StateRecognizedUnion","Widowed"],
        helpText: "The employee's marital status.",
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'WorkLocation',
        label: 'Work Location',
        type: 'integer',
        dynamic: 'get_work_locations.id.name',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'The name of the Work Location to associate with new hire.'
      },
      {
        key: 'JobTitle',
        label: 'Job Title',
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: "The employee's job title."
      },      
      {
        key: 'HireDate',
        label: 'Hire Date',
        type: 'datetime',
        default: 'today',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'Date the employee was hired.'
      },
      {
        key: 'ReHireDate',
        label: 'Re-hire Date',
        type: 'datetime',
        default: 'today',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Date the employee was re-hired.'
      },
      {
        key: 'Status',
        label: 'Status',
        type: 'string',
        default: 'Active',
        choices: [
          'Active',
          'Deceased',
          'LongTermDisability',
          'ShortTermDisability',
          'Fmla',
          'LaidOff',
          'LeaveWithPay',
          'LeaveWithoutPay',
          'ThirdPartyPayable',
          'Resigned',
          'Retired',
          'Terminated',
          'WorkersCompensation',
        ],
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'Status'
      },
      {
        key: 'Flsa',
        label: 'FLSA Type',
        type: 'string',
        choices: [
          'HourlyExempt',
          'HourlyNonExempt',
          'SalaryExempt',
          'SalaryNonExempt',
        ],
        helpText: 'Fair Labor Standards Act (FLSA) employment values.',
        required: false,
        list: false,
        altersDynamicFields: false,
      },
      {
        key: 'EmploymentType',
        label: 'Employment Type',
        type: 'string',
        default: 'Regular',
        choices: ['Casual','IndependentContractor','Regular','Seasonal','Temporary','Variable'],
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Employment types'
      },
      {
        key: 'ManagerEmpId',
        label: "Manager",
        type: 'string',
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: "Unique identifier of the manager in Paycor's system."
      },
      {
        key: 'PaygroupDescription',
        label: 'Paygroup',
        type: 'string',
        dynamic: 'get_paygroups.payGroupName.payGroupName',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'Pay group'

      },
      {
        key: 'DepartmentCode',
        label: 'Department',
        type: 'integer',
        dynamic: 'get_departments.code.description',
        required: true,
        list: false,
        altersDynamicFields: false,
        helpText: 'Department'
      },
      {
        key: 'Veteran',
        label: 'Veteran',
        type: 'string',
        choices: ["Yes","No","DeclinedToIdentify"],
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Veteran types'
      },
      {
        key: 'Disability',
        label: 'Disability',
        type: 'string',
        choices: ["Yes","No","DeclinedToIdentify"],
        required: false,
        list: false,
        altersDynamicFields: false,
        helpText: 'Disability types'
      },
      {
        key: 'PrimaryAddress',
        children: [
          {
            key: 'StreetLine1',
            label: 'Street 1',
            type: 'string',
            required: true,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'StreetLine2',
            label: 'Street 2',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'Suite',
            label: 'Suite',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'City',
            label: 'City',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'State',
            label: 'State',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'Country',
            label: 'Country',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'County',
            label: 'County',
            type: 'string',
            required: false,
            list: false,
            altersDynamicFields: false,
          },
          {
            key: 'ZipCode',
            label: 'Postal Code',
            type: 'string',
            required: true,
            list: false,
            altersDynamicFields: false,
          },

        ],
        label: 'Primary Address',
        required: true,
        altersDynamicFields: false,
      },      
    ],
    sample: {
      Id: 'd63759d5-40cc-4ec2-98df-772342f1b974',
      Url: 'v1/myresources/resource?resourceID=d63759d5-40cc-4ec2-98df-772342f1b974',
    },
    outputFields: [
      { key: 'Id' },
      { key: 'Url' }
    ],
  },
  display: {
    description: 'Creates an employee record.',
    hidden: false,
    label: 'Create Employee',
  },
  key: 'create_employee',
  noun: 'Employee',
};
